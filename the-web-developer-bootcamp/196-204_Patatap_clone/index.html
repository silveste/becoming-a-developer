<!DOCTYPE html>
<html>
  <head>
    <title>Patatap</title>
    <link rel="stylesheet" type="text/css" href="assets/css/style.css">
    <script type="text/javascript" src="assets/js/lib/paper-full.min.js"></script>
    <script type="text/javascript" src="assets/js/lib/howler.min.js"></script>
    <script type="text/paperscript" canvas="canvas">

      var keyData = {
        q: {
          color: '',
          sound: new Howl({ src: ['assets/sounds/bubbles.mp3']})
        },
        w: {
          color: '',
          sound: new Howl({ src: ['assets/sounds/clay.mp3']})
        },
        e: {
          color: '',
          sound: new Howl({ src: ['assets/sounds/confetti.mp3']})
        },
        r: {
          color: '',
          sound: new Howl({ src: ['assets/sounds/corona.mp3']})
        },
        t: {
          color: '',
          sound: new Howl({ src: ['assets/sounds/dotted-spiral.mp3']})
        },
        y: {
          color: '',
          sound: new Howl({ src: ['assets/sounds/flash-1.mp3']})
        },
        u: {
          color: '',
          sound: new Howl({ src: ['assets/sounds/flash-2.mp3']})
        },
        i: {
          color: '',
          sound: new Howl({ src: ['assets/sounds/flash-3.mp3']})
        },
        o: {
          color: '',
          sound: new Howl({ src: ['assets/sounds/glimmer.mp3']})
        },
        p: {
          color: '',
          sound: new Howl({ src: ['assets/sounds/moon.mp3']})
        },
        a: {
          color: '',
          sound: new Howl({ src: ['assets/sounds/pinwheel.mp3']})
        },
        s: {
          color: '',
          sound: new Howl({ src: ['assets/sounds/piston-1.mp3']})
        },
        d: {
          color: '',
          sound: new Howl({ src: ['assets/sounds/piston-2.mp3']})
        },
        f: {
          color: '',
          sound: new Howl({ src: ['assets/sounds/piston-3.mp3']})
        },
        g: {
          color: '',
          sound: new Howl({ src: ['assets/sounds/prism-1.mp3']})
        },
        h: {
          color: '',
          sound: new Howl({ src: ['assets/sounds/prism-2.mp3']})
        },
        j: {
          color: '',
          sound: new Howl({ src: ['assets/sounds/prism-3.mp3']})
        },
        k: {
          color: '',
          sound: new Howl({ src: ['assets/sounds/splits.mp3']})
        },
        l: {
          color: '',
          sound: new Howl({ src: ['assets/sounds/squiggle.mp3']})
        },
        z: {
          color: '',
          sound: new Howl({ src: ['assets/sounds/strike.mp3']})
        },
        x: {
          color: '',
          sound: new Howl({ src: ['assets/sounds/suspension.mp3']})
        },
        c: {
          color: '',
          sound: new Howl({ src: ['assets/sounds/timer.mp3']})
        },
        v: {
          color: '',
          sound: new Howl({ src: ['assets/sounds/ufo.mp3']})
        },
        b: {
          color: '',
          sound: new Howl({ src: ['assets/sounds/veil.mp3']})
        },
        n: {
          color: '',
          sound: new Howl({ src: ['assets/sounds/wipe.mp3']})
        },
        m: {
          color: '',
          sound: new Howl({ src: ['assets/sounds/zig-zag.mp3']})
        },

      }

      var circles = [];

      function onKeyDown(event) {
        if (keyData[event.key]){
          keyData[event.key].sound.play();
          var maxPoint = new Point(view.size.width, view.size.height);
          var rPoint = Point.random();
          var point = maxPoint * rPoint;
          var circle = new Path.Circle(point, Math.floor(Math.random()*500)+ 15) //Generates a circle between 15 and 500 pixels radio
          if (!keyData[event.key].color){
            keyData[event.key].color = "#" + Math.floor(Math.random()*16777215).toString(16);
          }
          circle.fillColor = keyData[event.key].color;
          circles.push(circle);
        }
      }

      function onFrame(event){
        for (var i = 0; i < circles.length; i++){
          circles[i].fillColor.hue += 1;
          circles[i].scale(.9);
          if(circles[i].area < 1){
            circles[i].remove();
            circles.splice(i, 1);
            i--;
          }
        }
      }
    </script>
  </head>
  <body>
    <canvas id="canvas" resize></canvas>

  </body>
</html>
